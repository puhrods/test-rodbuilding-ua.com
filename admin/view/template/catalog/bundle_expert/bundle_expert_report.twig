{{ header }}{{ column_left }}
<div id="content">
    <div class="page-header">
        <div class="container-fluid">
            <div class="pull-right">

                <button type="submit" id="button-invoice" form="form-order" formaction="{{ invoice }}" formtarget="_blank" data-toggle="tooltip" title="{{ button_invoice_print }}" class="btn btn-info"><i class="fa fa-print"></i></button>

            </div>
            <h1>{{ heading_title }}</h1>
            <ul class="breadcrumb">
                {% for breadcrumb in breadcrumbs %}
                    <li><a href="{{ breadcrumb['href'] }}">{{ breadcrumb['text'] }}</a></li>
                {% endfor %}
            </ul>
        </div>
    </div>
    <div class="container-fluid">
        <div class="panel panel-default">
            <div class="panel-heading">


                <h3 class="panel-title"><i class="fa fa-bar-chart"></i> {{ text_list }}</h3>
            </div>
            <div class="panel-body">
                <div class="well">
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label class="control-label" for="input-date-start">{{ entry_date_start }}</label>
                                <div class="input-group date">
                                    <input type="text" name="filter_date_start" value="{{ filter_date_start }}" placeholder="{{ entry_date_start }}" data-date-format="YYYY-MM-DD" id="input-date-start" class="form-control" />
                                    <span class="input-group-btn">
                  <button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button>
                  </span></div>
                            </div>
                            <div class="form-group">
                                <label class="control-label" for="input-date-end">{{ entry_date_end }}</label>
                                <div class="input-group date">
                                    <input type="text" name="filter_date_end" value="{{ filter_date_end }}" placeholder="{{ entry_date_end }}" data-date-format="YYYY-MM-DD" id="input-date-end" class="form-control" />
                                    <span class="input-group-btn">
                  <button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button>
                  </span></div>
                            </div>
                        </div>
                        <div class="col-sm-6 ">

                            <div class="form-group">
                                <label class="control-label" for="input-status">{{ entry_status }}</label>
                                <select name="filter_order_status_id" id="input-status" class="form-control">
                                    <option value="0">{{ text_all_status }}</option>
                                    {% for order_status in order_statuses %}
                                        {% if (order_status['order_status_id'] == filter_order_status_id) %}
                                            <option value="{{ order_status['order_status_id'] }}" selected="selected">{{ order_status['name'] }}</option>
                                        {% else %}
                                            <option value="{{ order_status['order_status_id'] }}">{{ order_status['name'] }}</option>
                                        {% endif %}
                                    {% endfor %}
                                </select>
                            </div>
                            <button type="button" id="button-filter" class="btn btn-primary pull-right"><i class="fa fa-filter"></i> {{ button_filter }}</button>
                        </div>
                    </div>
                </div>
                <div class="table-responsive">
                    <form method="post" target="_blank" action="" enctype="multipart/form-data" id="form-order">
                        <div class="table-responsive">
                            <table class="table table-bordered table-hover">
                                <thead>
                                <tr>
                                    <td style="width: 1px;" class="text-center"><input type="checkbox" onclick="$('input[name*=\'selected\']').prop('checked', this.checked);$('input[name*=\'selected\']').first().change();" /></td>

                                    <td class="text-right">{{ column_order_id }}</td>
                                    <td class="text-left">{{ column_customer }}</td>
                                    <td class="text-left">{{ column_order_product }}</td>
                                    <td class="text-left">{{ column_status }}</td>
                                    <td class="text-right">{{ column_total }}</td>
                                    <td class="text-left">{{ column_date_added }}</td>
                                    <td class="text-left">{{ column_date_modified }}</td>
                                    <td class="text-right">{{ column_action }}</td>
                                </tr>
                                </thead>
                                <tbody>
                                {% if (orders) %}
                                    {% for order in orders %}
                                        <tr>

                                            <td class="text-center">{% if (order['selected']) %}
                                                    <input type="checkbox" name="selected[]" value="{{ order['order_id'] }}" checked="checked" />
                                                {% else %}
                                                    <input type="checkbox" name="selected[]" value="{{ order['order_id'] }}" />
                                                {% endif %}
                                            </td>

                                            <td class="text-right">{{ order['order_id'] }}</td>
                                            <td class="text-left">{{ order['customer'] }}</td>
                                            <td class="text-left">
                                                {% for product in order['products'] %}
                                                    <div style="margin-bottom: 8px;">
                                                        <span >{{ product['name_2'] }}</span>
                                                        {% for option in product['option'] %}
                                                            <br />
                                                            {% if (option['type'] != 'file') %}
                                                                &nbsp;<small> - {{ option['name'] }}: {{ option['value'] }}</small>
                                                            {% else %}
                                                                &nbsp;<small> - {{ option['name'] }}: <a href="{{ option['href'] }}">{{ option['value'] }}</a></small>
                                                            {% endif %}
                                                        {% endfor %}
                                                    </div>
                                                {% endfor %}
                                            </td>
                                            <td class="text-left">{{ order['order_status'] }}</td>
                                            <td class="text-right">{{ order['total'] }}</td>
                                            <td class="text-left">{{ order['date_added'] }}</td>
                                            <td class="text-left">{{ order['date_modified'] }}</td>
                                            <td class="text-right"><a href="{{ order['view'] }}" data-toggle="tooltip" title="{{ button_view }}" class="btn btn-info"><i class="fa fa-eye"></i></a> <a href="{{ order['edit'] }}" data-toggle="tooltip" title="{{ button_edit }}" class="btn btn-primary"><i class="fa fa-pencil"></i></a></td>
                                        </tr>
                                    {% endfor %}
                                {% else %}
                                    <tr>
                                        <td class="text-center" colspan="9">{{ text_no_results }}</td>
                                    </tr>
                                {% endif %}
                                </tbody>
                            </table>
                        </div>
                    </form>
                </div>
                <div class="row">
                    <div class="col-sm-6 text-left">{{ pagination }}</div>
                    <div class="col-sm-6 text-right">{{ results }}</div>
                </div>
            </div>
        </div>
    </div>
    <script type="text/javascript"><!--
        $('#button-filter').on('click', function() {
            url = 'index.php?route=catalog/bundle_expert_report&{{ token_name }}{{ token_value }}';

            var filter_date_start = $('input[name=\'filter_date_start\']').val();

            if (filter_date_start) {
                url += '&filter_date_start=' + encodeURIComponent(filter_date_start);
            }

            var filter_date_end = $('input[name=\'filter_date_end\']').val();

            if (filter_date_end) {
                url += '&filter_date_end=' + encodeURIComponent(filter_date_end);
            }

            // var filter_group = $('select[name=\'filter_group\']').val();
            //
            // if (filter_group) {
            // 	url += '&filter_group=' + encodeURIComponent(filter_group);
            // }

            var filter_order_status_id = $('select[name=\'filter_order_status_id\']').val();

            if (filter_order_status_id != 0) {
                url += '&filter_order_status_id=' + encodeURIComponent(filter_order_status_id);
            }

            location = url;
        });

        $('input[name^=\'selected\']').on('change', function() {
            $('#button-invoice').prop('disabled', true);

            var selected = $('input[name^=\'selected\']:checked');

            if (selected.length) {
                $('#button-invoice').prop('disabled', false);
            }

            for (i = 0; i < selected.length; i++) {
                if ($(selected[i]).parent().find('input[name^=\'shipping_code\']').val()) {
                    $('#button-shipping').prop('disabled', false);

                    break;
                }
            }
        });

        $('#button-invoice').prop('disabled', true);

        $('input[name^=\'selected\']:first').trigger('change');

        // IE and Edge fix!
        $('#button-invoice').on('click', function(e) {
            $('#form-order').attr('action', this.getAttribute('formAction'));
        });

        //--></script>
    <script type="text/javascript"><!--
        $('.date').datetimepicker({
            pickTime: false
        });
        //--></script></div>
{{ footer }}